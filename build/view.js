(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,a=window.ReactJSXRuntime;function r({tracks:e,includeLinkToTrack:r,showTrackImage:s,imageStyle:c,textAlign:l}){const n=e?.length>0,i=({children:e,url:t})=>r?(0,a.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",className:"track-name",children:e}):(0,a.jsx)("span",{className:"track-name",children:e});return(0,a.jsxs)("ul",{className:`tracks-list has-text-align-${l}`,children:[!n&&(0,a.jsx)("li",{className:"no-tracks-found",children:(0,t.__)("No tracks found.","lastfm-recently-played-block")}),n&&e.map((e=>(0,a.jsxs)("li",{children:[s&&(0,a.jsx)("div",{className:`track-image ${c}`,children:(0,a.jsx)(i,{url:e.url,children:(0,a.jsx)("span",{className:"artwork",role:"img","aria-label":`${e.artist["#text"]} - ${e.name}`,style:{backgroundImage:`url(${e.image[1]["#text"]})`},children:(0,a.jsx)("span",{className:"format"})})})}),(0,a.jsxs)("div",{className:"track-info",children:[(0,a.jsx)(i,{url:e.url,children:e.name}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"artist-name",children:e.artist["#text"]})]})]},e.url)))]})}const s=document.querySelector(".wp-block-lastfm-recently-played-block-lastfm-recently-played-block"),c=(0,e.createRoot)(s),l=s.dataset,n=l.lastfmApikey,i=l.lastfmUsername,o=l.lastfmNumberoftracks,m="true"===l.lastfmIncludelinktotrack,k="true"===l.lastfmShowtrackimage,d=l.lastfmImagestyle,u=l.lastfmTextalign;(async function(e,a,r="1"){return fetch(`https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${a}&api_key=${e}&format=json&limit=${r}`).then((e=>e.json())).then((e=>{if(e.error)throw e.message;if("0"===e.recenttracks["@attr"]?.total)throw(0,t.sprintf)(
// translators: %s: Last.fm username
// translators: %s: Last.fm username
(0,t.__)('No Last.fm tracks found from user "%s".',"lastfm-recently-played-block"),a);if(e.recenttracks.track){let t=e.recenttracks.track;return e.recenttracks.track.length===parseInt(r)+1&&(t=e.recenttracks.track.slice(0,r)),t}return[]})).catch((e=>{throw e}))})(n,i,o).then((e=>{c.render((0,a.jsx)(r,{tracks:e,includeLinkToTrack:m,showTrackImage:k,imageStyle:d,textAlign:u}))})).catch((e=>{console.error(e)}))})();